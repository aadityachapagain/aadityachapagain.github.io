{"pageProps":{"post":{"slug":"useeffect-in-react-a-biginners-guide","title":"Understanding useEffect in React - A Beginner's Guide","date":"2023-03-27 19:45","modified":"2023-03-27 19:45","category":"Blog","summary":"UseEffect hook is a powerful and versatile tool in react that allows you to handle side effects in your components.","tags":"react, react hooks, useEffect, reactjs, react states, side effect, coding, js, nextjs","authors":["Aaditya Chapagain"],"status":"published","content":"<p>React is a popular library for building user interfaces, and one of its most powerful features is the ability to manage component state and side effects. Today, we'll explore the useEffect hook, which allows us to handle side effects in functional components. This guide will cover the basics of useEffect, provide code examples to demonstrate its use in various scenarios, and help you understand when and how to use it.</p>\n<p>One of the most crucial ideas for knowing React today is how the 'useEffect' Hook functions. Consider that you have been using React for a while. In that instance, it is especially important to comprehend the differences between using useEffect and using the lifecycle methods of class-based components.</p>\n<p>In the React Hooks period, it is crucial to comprehend how to call side effects from within functional components with useEffect. At first, dealing with the useEffect Hook's side effects may seem difficult, but gradually everything will make sense.</p>\n<h2 id=\"table-of-contents\">Table of contents</h2>\n<ol>\n<li><a href=\"#what-are-side-effects\">What are side effects?</a></li>\n<li><a href=\"#using-useeffect\">Using <code>useEffect</code></a>\n<ol>\n<li><a href=\"#simulating-componentdidmount\">simulating <code>ComponentDidMount</code></a></li>\n<li><a href=\"#simulating-componentdidupdate\">Simulating <code>ComponentDidUpdate</code></a></li>\n<li><a href=\"#simulating-componentwillunmount\">Simulating <code>componentWillUnmount</code></a></li>\n</ol>\n</li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n<li><a href=\"#tips-and-tricks-on-using-useeffect-effectively\">Tips and Tricks on using useEffect effectively:</a></li>\n</ol>\n<h2 id=\"what-are-side-effects\">What are side effects?</h2>\n<p>Before we dive into how to use useEffect, let's discuss what side effects are in React.In simple terms, <code>side effects</code> is any action that occurs outside the scope of the component's <code>render</code> method. Such as</p>\n<ol>\n<li>Fetching data from API</li>\n<li>Setting up or cleaning event listeners</li>\n<li>updating the DOM directly</li>\n<li>Subscribing to a data stream</li>\n</ol>\n<p>Those side effects can cause issues in your application if they are not handled properly.For example, if you fetch data\nfrom an API inside a component every time it re-renders, you may end up making too many API calls, which can slow down your application and increase the cost of running it.</p>\n<h2 id=\"using-useeffect\">Using <code>useEffect</code></h2>\n<p>he <code>useEffect</code> hook is part of React's <a href=\"https://react.dev/reference/react\">Hooks API</a> and used to manage side effects in functional component of react.It accepts two arguments:</p>\n<ol>\n<li>A function that represents the side effects to be performed</li>\n<li>An optional array of dependencies that determines when the effect should be executed.</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title function_\">useEffect</span>(\n  <span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-comment\">// Side effect to be performed</span>\n  },\n  [\n    <span class=\"hljs-comment\">/* dependencies */</span>\n  ]\n);\n</code></pre>\n<h3 id=\"simulating-componentdidmount\">simulating <code>ComponentDidMount</code></h3>\n<p>Consider following example:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { useState, useEffect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [data, setData] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">\"https://api.example.com/data\"</span>)\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =></span> response.<span class=\"hljs-title function_\">json</span>())\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =></span> <span class=\"hljs-title function_\">setData</span>(data));\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n      {data ? (\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">ul</span>></span>\n          {data.map(item => (\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{item.id}</span>></span>{item.name}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">li</span>></span>\n          ))}\n        <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">ul</span>></span>\n      ) : (\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span>></span>Loading data...<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n      )}\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n}\n</code></pre>\n<p>Above , Inside useEffect hook, we use the fetch function to make a GET request to an API. When the response comes back, we parse the JSON data and update the <code>data</code> state variable using the <code>setData</code> function.</p>\n<p>The dependency array in <code>useEffect</code> is the array of values that the effect depends on which means if any of these values change, the effect will re-run or it will keep tracks of object in dependencies array and if any of the object in dependency array don't match with it previous version of data it will re-run the side effects written in <code>useEffect</code> hook.</p>\n<p>But, In above case the dependency array is empty which means the effect will only run once in its lifetime ( when it is mounting the component ). In terms of class based react, it is exact way of setting states on <code>ComponentDidMount</code> lifecycle method.</p>\n<h3 id=\"simulating-componentdidupdate\">Simulating <code>ComponentDidUpdate</code></h3>\n<p>Consider below example:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { useState, useEffect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\">{ userID }</span>) {\n  <span class=\"hljs-keyword\">const</span> [data, setData] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">`https://api.example.com/data?user_id=<span class=\"hljs-subst\">${userID}</span>`</span>)\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =></span> response.<span class=\"hljs-title function_\">json</span>())\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =></span> <span class=\"hljs-title function_\">setData</span>(data));\n  }, [userID]);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n      {data ? (\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">ul</span>></span>\n          {data.map(item => (\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{item.id}</span>></span>{item.name}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">li</span>></span>\n          ))}\n        <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">ul</span>></span>\n      ) : (\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span>></span>Loading data...<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n      )}\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n}\n</code></pre>\n<p>In above example, dependency array has one item which is also a props to the component. Hence, <code>useEffect</code> will track the changes on <code>userID</code> props, re-run the side effects present inside the useEffect when value of <code>userID</code> changes. Hence, It acts as a <code>componentDidUpdate</code> lifecycle method.</p>\n<h3 id=\"simulating-componentwillunmount\">Simulating <code>componentWillUnmount</code></h3>\n<p>Consider below example:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { useState, useEffect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [showComponent, setShowComponent] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">true</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">\"component mounted!\"</span>);\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =></span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">\"Component unmounted\"</span>);\n    };\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =></span> setShowComponent(!showComponent)}>\n        {\" \"}\n        Toggle Component\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n      {showComponent &#x26;&#x26; <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">ChildComponent</span> /></span>}\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">ChildComponent</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">\"Child component mounted\"</span>);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =></span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">\"Child component unmounted\"</span>);\n    };\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">h2</span>></span>Child Component<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">h2</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n}\n</code></pre>\n<p>In this example, we define a state variable called 'showComponent' and a function called 'setShowComponent' that we use to toggle the visibility of a child component.</p>\n<p>We use useEffect to log a message to the console when the component mounts and a different message when it unmounts. We also define a similar effect inside the child component.</p>\n<p>When we toggle the visibility of the child component using the button, we can see the messages in the console. When the child component is unmounted, the cleanup function is called which is similar functionality to the <code>componentWillUnmount</code> lifecycle method.</p>\n<h2 id=\"conclusion\">Conclusion</h2>\n<p>the useEffect hook is a powerful tool in React that allows you to handle side effects in your components. By using it correctly, you can make your code more efficient and easier to maintain.</p>\n<p>Remember, useEffect takes two arguments: a function and an array of dependencies. The function is the side effect you want to perform, and the dependencies are variables that the effect depends on.</p>\n<p>You can use useEffect to fetch data from an API, update the title of the page, or set up timers and intervals. You can also use useEffect to return a cleanup function that cleans up any resources used by the effect.</p>\n<p>It's important to pass the correct dependencies to useEffect to avoid unnecessary re-renders and memory leaks.</p>\n<h2 id=\"tips-and-tricks-on-using-useeffect-effectively\">Tips and Tricks on using useEffect effectively:</h2>\n<ul>\n<li>\n<p><strong>Use it for handling side effects</strong>: useEffects is designed to handle side effects and you should only use it that way.If you need to modify the state of your component, you should use useState instead.</p>\n</li>\n<li>\n<p><strong>Seperate concerns</strong>: Use multiple useEffect hooks to separate unrelated side effects. This makes your code easier to understand and maintain.</p>\n</li>\n<li>\n<p><strong>Optimize performance</strong>: Be mindful of the dependencies you pass to useEffect. Provide an array of dependencies that accurately represent when the effect should be executed to avoid unnecessary updates.</p>\n</li>\n<li>\n<p><strong>Avoid infinite loops</strong>: When using a state variable as a dependency, make sure your effect does not cause an infinite loop by updating that state variable on every render.</p>\n</li>\n<li>\n<p><strong>Don't forget the cleanup</strong>: Always provide a cleanup function when your side effect requires it to avoid memory leaks and unexpected behavior.</p>\n</li>\n</ul>"}},"__N_SSG":true}