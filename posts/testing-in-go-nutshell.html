<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="keywords" content="Machine Learning"/><meta name="keywords" content="Go"/><meta name="keywords" content=" Golang"/><meta name="keywords" content=" Test"/><meta name="keywords" content=" Testing"/><meta name="keywords" content=" software development"/><meta name="keywords" content=" Programming language"/><meta name="keywords" content=" TDD"/><title>Testing Go Program in Nutshell.</title><meta name="next-head-count" content="11"/><meta charSet="utf-8"/><meta name="robots" content="follow, index"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><link rel="preload" href="/_next/static/css/9faa6e02f2d2ddcd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9faa6e02f2d2ddcd.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-123e44da1b1c97f5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-32a87357c3addbcc.js" defer=""></script><script src="/_next/static/chunks/281-2503d455e5b415a8.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-aaad8f368cf4a5f3.js" defer=""></script><script src="/_next/static/-hP-CK-LbCiyMceG8QNWC/_buildManifest.js" defer=""></script><script src="/_next/static/-hP-CK-LbCiyMceG8QNWC/_ssgManifest.js" defer=""></script></head><body class="bg-white text-gray-700 antialiased"><div id="__next"><div class="flex flex-col h-screen "><header class="py-8 lg:px-10 "><div class="px-2 md:px-8 relative"><nav class="flex space-x-6 text-zinc-400 tracking-wide items-center justify-between "><a class="text-xl ml-4 " href="/"><div class="flex flex-row gap-1 items-center content-center "><img alt="profile logo" loading="lazy" width="48" height="48" decoding="async" data-nimg="1" class="mr-2" style="color:transparent" srcSet="https://aadiimages.imgix.net//aaditya-profile.png?w=48&amp;q=75 1x, https://aadiimages.imgix.net//aaditya-profile.png?w=96&amp;q=75 2x" src="https://aadiimages.imgix.net//aaditya-profile.png?w=96&amp;q=75"/> <span class="font-bold text-black">Aaditya</span> <span>Chapagain</span></div></a><div class="grow h-full"> </div><div class="hidden lg:flex space-x-6 text-zinc-400 tracking-wide items-center justify-between "><a class=" undefined" href="/">About Me</a><a class=" undefined" href="/posts">Logs</a><a class=" undefined" href="/projects">Projects</a><a class=" undefined" href="/sapiens">Thoughts</a><a class=" undefined" href="/resume">Resume</a><a class=" undefined" href="/contact">Contact</a></div><div class="flex lg:hidden border rounded-md p-2 mr-3 hover:bg-stone-200 "><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="font-size:24px;color:black"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path></svg></div></nav></div></header><div class="p-4 lg:p-8  inline-block grow "><main class="py-8 px-8 lg:px-0 "><div class="container max-w-3xl m-auto px-4"><div><article><header><h1 class="text-4xl font-bold">Testing Go Program in Nutshell.</h1><p class="mt-2 text-xl">Testing Framework in Go is extremely simple and minimal</p><time class="flex mt-2 text-gray-400">3 years ago</time></header><div class="prose mt-10 "><h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#the-go-test-tool">The GO test Tool</a></li>
<li><a href="#test-functions">Test Functions</a></li>
<li><a href="#benchmark-function">Benchmark Function</a></li>
</ul>
<h1 id="the-go-test-tool">The GO test Tool</h1>
<p>Testing in Go starts with <code>go test</code> subcommand i.e. test driver for Go packages that are organized according to certain conventions. <code>go test</code> command specifically looks and execute files that ends with <strong>_test.go</strong> which are not part of the package when built by <code>go build </code>.</p>
<p>The Go test files contains three kinds of special functions :</p>
<ul>
<li>
<p>A <em>test function</em>: Function which name starts with <code>Test</code>. This function exercises some program logic for correct behaviour; subcommand <code>go test</code> calls the test function and reports the result which is either <code>PASS</code> or <code>FAIL</code>.</p>
</li>
<li>
<p>A <em>benchmark function</em>: It has the name beginning with <code>Benchmark</code> and measures the performance of some operations; subcommand <code>go test</code> reports the mean execution time of the operation.</p>
</li>
<li>
<p>An <em>example function</em>: Its name starts with <code>Example</code> provides machine-checked documentation.</p>
</li>
</ul>
<p>The <code>go test</code> tool scans the *_test.go files for these special functions, generates a temporary main package that calls them all in the proper way, builds and runs it, reports the result, and then cleans up.</p>
<h1 id="test-functions">Test Functions</h1>
<p>Each test file must import the testing package. Test functions has following signature :</p>
<pre><code class="hljs language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestName</span><span class="hljs-params">(t *testing.T)</span></span> {
  <span class="hljs-comment">// ..</span>
}

</code></pre>
<p>Test function names must begin with Test; The optional suffix Name must begin with a capital letter:</p>
<pre><code class="hljs language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestSin</span><span class="hljs-params">(t *testing.T)</span></span> { <span class="hljs-comment">// ... }</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestCos</span><span class="hljs-params">(t *testing.T)</span></span> { <span class="hljs-comment">// ... }</span>
</code></pre>
<p>The t parameter provides methods for reporting test failures and logging additional information. Lets create a new package palindrome containing a single function IsPalindrome that reports whether a string a string reads same forward and backward.</p>
<pre><code class="hljs language-go"><span class="hljs-keyword">package</span> palindrome

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">IsPalidrome</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">bool</span> {
  <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> s {
    <span class="hljs-keyword">if</span> s[i] != s[<span class="hljs-built_in">len</span>(s) - <span class="hljs-number">1</span> - i] {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

</code></pre>
<p>In the same directory, the palindrome_test.go contains two test functions named TestPalindrome and TestNonPalindrome. Each check that IsPalindrome gives the right answer for a single input and reports failures using t.Errorf:</p>
<pre><code class="hljs language-go"><span class="hljs-keyword">package</span> palindrome

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestPalindrome</span><span class="hljs-params">(t *testing.T)</span></span> {
  <span class="hljs-keyword">if</span> !IsPalindrome(<span class="hljs-string">"detartrated"</span>) {
    t.Errorf(<span class="hljs-string">`IsPalindrome("detartrated") = false`</span>)
  }
  <span class="hljs-keyword">if</span> !IsPalindrome(<span class="hljs-string">"kayak"</span>) {
    t.Errorf(<span class="hljs-string">`IsPalindrome("kayak") = false`</span>)
  }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestNonPalindrome</span><span class="hljs-params">(t *testing.T)</span></span> {
  <span class="hljs-keyword">if</span> IsPalindrome(<span class="hljs-string">"palindrome"</span>) {
    t.Error(<span class="hljs-string">`IsPalindrome("palindrome") = true`</span>)
  }
}

</code></pre>
<p>Now,we already have test code to test our functionality, we can use go test command to run tests in go.
Remember <code>go test palindrome</code> will run the package level test.For this to work you have to place your package in either <code>$GOROOT</code> or <code>$GOPATH</code> directory.
In our case we can test our functionlity by going into pacakge directory.</p>
<pre><code class="hljs language-bash">> <span class="hljs-built_in">cd</span> &#x3C;path_to_project_dir>/palindrome
> go <span class="hljs-built_in">test</span>

PASS
ok  	&#x3C;path_to_project_dir>/palindrome	0.001s
</code></pre>
<p>To look into more details on test function, To see which one failed and which one succeed, we can use <code>-v</code> flag , which will prints the name and execution time of each test in the package.</p>
<pre><code class="hljs language-bash">> go <span class="hljs-built_in">test</span> -v

=== RUN TestPalindrome
--- PASS: TestPalindrome (0.00s)
=== RUN TestNonPalindrome
--- PASS: TestNonPalindrome (0.00s)
=== RUN TestFrenchPalindrome
--- FAIL: TestFrenchPalindrome (0.00s)
word_test.go:28: IsPalindrome(<span class="hljs-string">"été"</span>) = <span class="hljs-literal">false</span>
=== RUN TestCanalPalindrome
--- FAIL: TestCanalPalindrome (0.00s)
word_test.go:35: IsPalindrome(<span class="hljs-string">"A man, a plan, a canal: Panama"</span>) = <span class="hljs-literal">false</span>
FAIL
<span class="hljs-built_in">exit</span> status 1
FAIL  &#x3C;path_to_project_dir>/palindrome 0.001s

</code></pre>
<p>and the -run flag, whose argument is a regular expression, causes go test to run only those tests whose function name matches the patter:</p>
<pre><code class="hljs language-bash">
> go <span class="hljs-built_in">test</span> -v -run=<span class="hljs-string">"French|Canal"</span>
=== RUN TestFrenchPalindrome
--- FAIL: TestFrenchPalindrome (0.00s)
word_test.go:28: IsPalindrome(<span class="hljs-string">"été"</span>) = <span class="hljs-literal">false</span>
=== RUN TestCanalPalindrome
--- FAIL: TestCanalPalindrome (0.00s)
word_test.go:35: IsPalindrome(<span class="hljs-string">"A man, a plan, a canal: Panama"</span>) = <span class="hljs-literal">false</span>
FAIL
<span class="hljs-built_in">exit</span> status 1
FAIL  &#x3C;path_to_project_dir>/palindrome 0.001s

</code></pre>
<h1 id="benchmark-function">Benchmark Function</h1>
<p>Benchmarking is the practice of measuring the performance of a program on a fixed workload. In Go, a benchmark function look like a test function, but with the
Benchmark prefix and a *testing.B parameter that provides most of the same methods as a *testing.T, plus few extra related performance measurement.It also exposes
an Integer field N, which specifies the number of times to perform the operation being measured.</p>
<p>Here's a benchmark for IsPalindrome that calls it N times in a loop.</p>
<pre><code class="hljs language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">BenchmarkIsPalindrome</span><span class="hljs-params">(b *testing.B)</span></span> {
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &#x3C; b.N; i++ {
    IsPalindrome(<span class="hljs-string">"A man, a plan, a canal: Panama"</span>)
  }
}
</code></pre>
<p>Unlike tests, by default no benchmarks are run. The argument to the -bench flag selects which benchmark to run. It is regular expression matching the names of Benchmark functions, with a default value that matches none of the functions. The "." pattern causes it to match all benchmark functions in package.</p>
<pre><code class="hljs language-bash">> go <span class="hljs-built_in">test</span> -bench=.
goos: linux
goarch: amd64
BenchmarkIsPalindrome-12    	 4377900	       301 ns/op
PASS
ok  	&#x3C;path_to_project_dir>/palindrome	1.598s
</code></pre>
<p>The benchmark name’s numeric suffix, 12 here , indicates the value of GOMAXPROCS, which is important for concurrent benchmarks.</p>
<p>The report tells us that each call to <em>IsPalindrome</em> took about 0.301 microseconds, averaged over 4377900 runs. Since the benchmark runner initially has no idea how long the operation takes, it make some initial measuremetns using small values of N and then extrapolates to a value large enough for a stable timing measurement to be made.</p></div></article><div class="mt-20"><form><textarea class="flex w-full max-h-40 p-3 rounded resize-y bg-gray-200 text-gray-900 placeholder-gray-500" rows="2" placeholder="Please login to leave a comment" disabled=""></textarea><div class="flex items-center mt-4"><button type="button" class="py-2 px-4 rounded bg-blue-600 text-white disabled:opacity-40 hover:bg-blue-700">Log In</button></div></form><div class="space-y-6 mt-10"></div></div></div></div></main></div><div class="static inset-x-0 bottom-0 content-center py-6 "><div class="flex flex-auto px-6 text-slate-400 gap-1.5 font-semibold "><div class="grow h-16 "> </div><div class="flex flex-col gap-1.5 items-center content-between "><div class="flex flex-auto items-center gap-2 "><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="copyright" class="svg-inline--fa fa-copyright " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="font-size:20px"><path fill="currentColor" d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM199.4 312.6c-31.2-31.2-31.2-81.9 0-113.1s81.9-31.2 113.1 0c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9c-50-50-131-50-181 0s-50 131 0 181s131 50 181 0c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0c-31.2 31.2-81.9 31.2-113.1 0z"></path></svg><span>   2023  </span><span>Aaditya Chapagain</span></div><div class="ml-2 ">All Rights Reserved</div></div><div class="grow h-16 "> </div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"testing-in-go-nutshell","title":"Testing Go Program in Nutshell.","date":"2020-08-11 08:00","modified":"2020-08-11 08:00","category":"Blog","summary":"Testing Framework in Go is extremely simple and minimal","tags":"Go, Golang, Test, Testing, software development, Programming language, TDD","authors":["Aaditya Chapagain"],"status":"published","content":"\u003ch2 id=\"table-of-contents\"\u003eTable of contents\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#the-go-test-tool\"\u003eThe GO test Tool\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#test-functions\"\u003eTest Functions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#benchmark-function\"\u003eBenchmark Function\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"the-go-test-tool\"\u003eThe GO test Tool\u003c/h1\u003e\n\u003cp\u003eTesting in Go starts with \u003ccode\u003ego test\u003c/code\u003e subcommand i.e. test driver for Go packages that are organized according to certain conventions. \u003ccode\u003ego test\u003c/code\u003e command specifically looks and execute files that ends with \u003cstrong\u003e_test.go\u003c/strong\u003e which are not part of the package when built by \u003ccode\u003ego build \u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThe Go test files contains three kinds of special functions :\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eA \u003cem\u003etest function\u003c/em\u003e: Function which name starts with \u003ccode\u003eTest\u003c/code\u003e. This function exercises some program logic for correct behaviour; subcommand \u003ccode\u003ego test\u003c/code\u003e calls the test function and reports the result which is either \u003ccode\u003ePASS\u003c/code\u003e or \u003ccode\u003eFAIL\u003c/code\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eA \u003cem\u003ebenchmark function\u003c/em\u003e: It has the name beginning with \u003ccode\u003eBenchmark\u003c/code\u003e and measures the performance of some operations; subcommand \u003ccode\u003ego test\u003c/code\u003e reports the mean execution time of the operation.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAn \u003cem\u003eexample function\u003c/em\u003e: Its name starts with \u003ccode\u003eExample\u003c/code\u003e provides machine-checked documentation.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe \u003ccode\u003ego test\u003c/code\u003e tool scans the *_test.go files for these special functions, generates a temporary main package that calls them all in the proper way, builds and runs it, reports the result, and then cleans up.\u003c/p\u003e\n\u003ch1 id=\"test-functions\"\u003eTest Functions\u003c/h1\u003e\n\u003cp\u003eEach test file must import the testing package. Test functions has following signature :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestName\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(t *testing.T)\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// ..\u003c/span\u003e\n}\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTest function names must begin with Test; The optional suffix Name must begin with a capital letter:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestSin\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(t *testing.T)\u003c/span\u003e\u003c/span\u003e { \u003cspan class=\"hljs-comment\"\u003e// ... }\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestCos\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(t *testing.T)\u003c/span\u003e\u003c/span\u003e { \u003cspan class=\"hljs-comment\"\u003e// ... }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe t parameter provides methods for reporting test failures and logging additional information. Lets create a new package palindrome containing a single function IsPalindrome that reports whether a string a string reads same forward and backward.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e palindrome\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eIsPalidrome\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(s \u003cspan class=\"hljs-type\"\u003estring\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003ebool\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i := \u003cspan class=\"hljs-keyword\"\u003erange\u003c/span\u003e s {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e s[i] != s[\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(s) - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e - i] {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n    }\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n}\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the same directory, the palindrome_test.go contains two test functions named TestPalindrome and TestNonPalindrome. Each check that IsPalindrome gives the right answer for a single input and reports failures using t.Errorf:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e palindrome\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestPalindrome\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(t *testing.T)\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e !IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"detartrated\"\u003c/span\u003e) {\n    t.Errorf(\u003cspan class=\"hljs-string\"\u003e`IsPalindrome(\"detartrated\") = false`\u003c/span\u003e)\n  }\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e !IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"kayak\"\u003c/span\u003e) {\n    t.Errorf(\u003cspan class=\"hljs-string\"\u003e`IsPalindrome(\"kayak\") = false`\u003c/span\u003e)\n  }\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestNonPalindrome\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(t *testing.T)\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"palindrome\"\u003c/span\u003e) {\n    t.Error(\u003cspan class=\"hljs-string\"\u003e`IsPalindrome(\"palindrome\") = true`\u003c/span\u003e)\n  }\n}\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow,we already have test code to test our functionality, we can use go test command to run tests in go.\nRemember \u003ccode\u003ego test palindrome\u003c/code\u003e will run the package level test.For this to work you have to place your package in either \u003ccode\u003e$GOROOT\u003c/code\u003e or \u003ccode\u003e$GOPATH\u003c/code\u003e directory.\nIn our case we can test our functionlity by going into pacakge directory.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003e \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e \u0026#x3C;path_to_project_dir\u003e/palindrome\n\u003e go \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e\n\nPASS\nok  \t\u0026#x3C;path_to_project_dir\u003e/palindrome\t0.001s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo look into more details on test function, To see which one failed and which one succeed, we can use \u003ccode\u003e-v\u003c/code\u003e flag , which will prints the name and execution time of each test in the package.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003e go \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e -v\n\n=== RUN TestPalindrome\n--- PASS: TestPalindrome (0.00s)\n=== RUN TestNonPalindrome\n--- PASS: TestNonPalindrome (0.00s)\n=== RUN TestFrenchPalindrome\n--- FAIL: TestFrenchPalindrome (0.00s)\nword_test.go:28: IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"été\"\u003c/span\u003e) = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n=== RUN TestCanalPalindrome\n--- FAIL: TestCanalPalindrome (0.00s)\nword_test.go:35: IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"A man, a plan, a canal: Panama\"\u003c/span\u003e) = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\nFAIL\n\u003cspan class=\"hljs-built_in\"\u003eexit\u003c/span\u003e status 1\nFAIL  \u0026#x3C;path_to_project_dir\u003e/palindrome 0.001s\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand the -run flag, whose argument is a regular expression, causes go test to run only those tests whose function name matches the patter:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\n\u003e go \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e -v -run=\u003cspan class=\"hljs-string\"\u003e\"French|Canal\"\u003c/span\u003e\n=== RUN TestFrenchPalindrome\n--- FAIL: TestFrenchPalindrome (0.00s)\nword_test.go:28: IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"été\"\u003c/span\u003e) = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n=== RUN TestCanalPalindrome\n--- FAIL: TestCanalPalindrome (0.00s)\nword_test.go:35: IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"A man, a plan, a canal: Panama\"\u003c/span\u003e) = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\nFAIL\n\u003cspan class=\"hljs-built_in\"\u003eexit\u003c/span\u003e status 1\nFAIL  \u0026#x3C;path_to_project_dir\u003e/palindrome 0.001s\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"benchmark-function\"\u003eBenchmark Function\u003c/h1\u003e\n\u003cp\u003eBenchmarking is the practice of measuring the performance of a program on a fixed workload. In Go, a benchmark function look like a test function, but with the\nBenchmark prefix and a *testing.B parameter that provides most of the same methods as a *testing.T, plus few extra related performance measurement.It also exposes\nan Integer field N, which specifies the number of times to perform the operation being measured.\u003c/p\u003e\n\u003cp\u003eHere's a benchmark for IsPalindrome that calls it N times in a loop.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eBenchmarkIsPalindrome\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(b *testing.B)\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i := \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026#x3C; b.N; i++ {\n    IsPalindrome(\u003cspan class=\"hljs-string\"\u003e\"A man, a plan, a canal: Panama\"\u003c/span\u003e)\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUnlike tests, by default no benchmarks are run. The argument to the -bench flag selects which benchmark to run. It is regular expression matching the names of Benchmark functions, with a default value that matches none of the functions. The \".\" pattern causes it to match all benchmark functions in package.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003e go \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e -bench=.\ngoos: linux\ngoarch: amd64\nBenchmarkIsPalindrome-12    \t 4377900\t       301 ns/op\nPASS\nok  \t\u0026#x3C;path_to_project_dir\u003e/palindrome\t1.598s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe benchmark name’s numeric suffix, 12 here , indicates the value of GOMAXPROCS, which is important for concurrent benchmarks.\u003c/p\u003e\n\u003cp\u003eThe report tells us that each call to \u003cem\u003eIsPalindrome\u003c/em\u003e took about 0.301 microseconds, averaged over 4377900 runs. Since the benchmark runner initially has no idea how long the operation takes, it make some initial measuremetns using small values of N and then extrapolates to a value large enough for a stable timing measurement to be made.\u003c/p\u003e"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"testing-in-go-nutshell"},"buildId":"-hP-CK-LbCiyMceG8QNWC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>