<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Useful Python decorator to take your code to MARS and beyond<!-- --> | aaditya&#x27;s blog</title><meta name="description" content="This post is about Machine Learning, python, coding, decorator, callbacks, developer, python skill, ."/><meta property="og:title" content="My Personal blog site."/><meta property="og:description" content="This post is about Machine Learning, python, coding, decorator, callbacks, developer, python skill, ."/><meta property="og:url" content="https://aadityachapagain.com//posts/useful-python-decorators-to-take-your-code-to-moon-and-beyond"/><meta property="og:type" content="website"/><meta name="keywords" content="Machine Learning"/><meta name="keywords" content=" python"/><meta name="keywords" content=" coding"/><meta name="keywords" content=" decorator"/><meta name="keywords" content=" callbacks"/><meta name="keywords" content=" developer"/><meta name="keywords" content=" python skill"/><meta name="keywords" content=""/><meta name="next-head-count" content="16"/><meta charSet="utf-8"/><meta name="robots" content="follow, index"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><link rel="preload" href="/_next/static/css/77a0a18464211215.css" as="style"/><link rel="stylesheet" href="/_next/static/css/77a0a18464211215.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-10779d2dcf90bfb3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-669a38bf4467e335.js" defer=""></script><script src="/_next/static/chunks/281-2503d455e5b415a8.js" defer=""></script><script src="/_next/static/chunks/113-e447bd8132396402.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-3f32a22c118677b3.js" defer=""></script><script src="/_next/static/PUYH9SLgvJIBw6lAfxbRe/_buildManifest.js" defer=""></script><script src="/_next/static/PUYH9SLgvJIBw6lAfxbRe/_ssgManifest.js" defer=""></script></head><body class="bg-white text-gray-700 antialiased"><div id="__next"><div class="flex flex-col h-screen "><header class="py-8 lg:px-10 "><div class="px-2 md:px-8 relative"><nav class="flex space-x-6 text-zinc-400 tracking-wide items-center justify-between "><a class="text-xl ml-4 " href="/"><div class="flex flex-row gap-1 items-center content-center "><img alt="profile logo" loading="lazy" width="48" height="48" decoding="async" data-nimg="1" class="mr-2" style="color:transparent" srcSet="https://aadiimages.imgix.net//aaditya-profile.png?w=48&amp;q=75 1x, https://aadiimages.imgix.net//aaditya-profile.png?w=96&amp;q=75 2x" src="https://aadiimages.imgix.net//aaditya-profile.png?w=96&amp;q=75"/> <span class="font-bold text-black">Aaditya</span> <span>Chapagain</span></div></a><div class="grow h-full"> </div><div class="hidden lg:flex space-x-6 text-zinc-400 tracking-wide items-center justify-between "><a class=" undefined" href="/">About Me</a><a class=" undefined" href="/posts">Logs</a><a class=" undefined" href="/projects">Projects</a><a class=" undefined" href="/sapiens">Thoughts</a><a class=" undefined" href="/resume">Resume</a><a class=" undefined" href="/contact">Contact</a></div><div class="flex lg:hidden border rounded-md p-2 mr-3 hover:bg-stone-200 "><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="font-size:24px;color:black"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path></svg></div></nav></div></header><div class="p-4 lg:p-8  inline-block grow "><main class="py-8 px-8 lg:px-0 "><div class="container max-w-3xl m-auto px-4"><div><article><header><h1 class="text-4xl font-bold">Useful Python decorator to take your code to MARS and beyond</h1><p class="mt-2 text-xl">Do more thing with less code without compromising on quality</p><time class="flex mt-2 text-gray-400">11 months ago</time></header><div class="prose mt-10 "><p>In this blog post, we will explore 10 helpful decorators which I regularly use in my projects to extend my mode with extra functionalites. We'll dive into each decorator, look at the code and play with some hands-on examples. If you are also Python developer, these decorators will help you massively in your python projects.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ol>
<li><a href="#logger">@logger</a></li>
<li><a href="#lru_cache">@lru_cache</a></li>
<li><a href="#repeat">@repeat</a></li>
<li><a href="#timeit">@timeit</a></li>
<li><a href="#retry">@retry</a></li>
<li><a href="#countcall">@countcall</a></li>
<li><a href="#rate_limited">@rate_limited</a></li>
<li><a href="#register">@register</a></li>
<li><a href="#dataclass">@dataclass</a></li>
<li><a href="#singledispatch">@singledispatch</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
<h2 id="logger">@logger</h2>
<p>If you are unfamiliar with decorators, consider reading my previous <a href="https://aadityachapagain.com/posts/understanding-python-decorator-with-its-usage">blog post</a>.</p>
<p>logger is a function that takes a function as input and return a function as output.The output function is usually an extended version of the input. In our case, we want the output function to surround the call of the input function with <code>start</code> and <code>end</code> statements.</p>
<p>Here's the simple implementation of the <code>logger</code> decorator.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">logger</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">  @wraps(<span class="hljs-params">func</span>)</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"----- <span class="hljs-subst">{function.__name__}</span>: start -----"</span>)
    output = func(*args, **kwargs)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"----- <span class="hljs-subst">{function.__name__}</span>: end -----"</span>)
    <span class="hljs-keyword">return</span> output
  <span class="hljs-keyword">return</span> wrapper


<span class="hljs-comment"># now you can apply logger to any other functions</span>
<span class="hljs-meta">@logger</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">some_func</span>(<span class="hljs-params">text</span>):
  <span class="hljs-comment"># do something here</span>

</code></pre>
<h2 id="lru_cache">@lru_cache</h2>
<p>This is a built-in decorator that you can import from <code>functools</code>.</p>
<p>It caches the return values of a function , using a least-recently-used( LRU ) algorithm to discard the least-used values when the cache is full.</p>
<p>I typically use this decorator for long-running tasks that don't change the output with the same input like querying a database, requesting a static remote web page, or running some heavy processing.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache


<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-literal">None</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">heavy_processing</span>(<span class="hljs-params">n</span>):
    sleep_time = n + random.random()
    time.sleep(sleep_time)

<span class="hljs-comment"># first time</span>
%%time
heavy_processing(<span class="hljs-number">0</span>)
<span class="hljs-comment"># CPU times: user 363 µs, sys: 727 µs, total: 1.09 ms</span>
<span class="hljs-comment"># Wall time: 694 ms</span>

<span class="hljs-comment"># second time</span>
%%time
heavy_processing(<span class="hljs-number">0</span>)
<span class="hljs-comment"># CPU times: user 4 µs, sys: 0 ns, total: 4 µs</span>
<span class="hljs-comment"># Wall time: 8.11 µs</span>

<span class="hljs-comment"># third time</span>
%%time
heavy_processing(<span class="hljs-number">0</span>)
<span class="hljs-comment"># CPU times: user 5 µs, sys: 1 µs, total: 6 µs</span>
<span class="hljs-comment"># Wall time: 7.15 µs</span>

</code></pre>
<p>if you want to implement a cache decorator yourself from scratch, here's how you'd do it:</p>
<ul>
<li>You add an empty dictionary as an attribute to the wrapper function to store previously computed values by the input function</li>
<li>When calling the input function, you first check if its arguments are present in the cache. If it's the case, return the result. Otherwise, compute it and put it in the cache.</li>
</ul>
<pre><code class="hljs language-python">
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">cache</span>(<span class="hljs-params">function</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">function</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        cache_key = args + <span class="hljs-built_in">tuple</span>(kwargs.items())
        <span class="hljs-keyword">if</span> cache_key <span class="hljs-keyword">in</span> wrapper.cache:
            output = wrapper.cache[cache_key]
        <span class="hljs-keyword">else</span>:
            output = function(*args)
            wrapper.cache[cache_key] = output
        <span class="hljs-keyword">return</span> output
    wrapper.cache = <span class="hljs-built_in">dict</span>()
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@cache</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">heavy_processing</span>(<span class="hljs-params">n</span>):
    sleep_time = n + random.random()
    time.sleep(sleep_time)


%%time
heavy_processing(<span class="hljs-number">1</span>)
<span class="hljs-comment"># CPU times: user 446 µs, sys: 864 µs, total: 1.31 ms</span>
<span class="hljs-comment"># Wall time: 1.06 s</span>

%%time
heavy_processing(<span class="hljs-number">1</span>)
<span class="hljs-comment"># CPU times: user 11 µs, sys: 0 ns, total: 11 µs</span>
<span class="hljs-comment"># Wall time: 13.1 µs</span>

</code></pre>
<h2 id="repeat">@repeat</h2>
<p>This decorator causes a function to be called multiple times in a row.</p>
<p>This can be useful for debugging purposes, stress tests, or automating the repetition of multiple tasks.</p>
<p>Unlike the previous decorators, this one expects an input parameter.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">def</span> <span class="hljs-title function_">repeat</span>(<span class="hljs-params">number_of_times</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorate</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(number_of_times):
                func(*args, **kwargs)
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorate


<span class="hljs-meta">@repeat(<span class="hljs-params"><span class="hljs-number">5</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">dummy</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)

dummy()
<span class="hljs-comment"># hello</span>
<span class="hljs-comment"># hello</span>
<span class="hljs-comment"># hello</span>
<span class="hljs-comment"># hello</span>
<span class="hljs-comment"># hello</span>

</code></pre>
<h2 id="timeit">@timeit</h2>
<p>This decorator measures the execution time of a function and prints the result: this serves as debugging or monitoring.</p>
<p>In the following snippet, the <code>timeit</code> decorator measures the time it takes for the <code>process_data</code> function to execute and prints out the elapsed time in seconds.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">timeit</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">  @wraps(<span class="hljs-params">func</span>):</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
    start = time.perf_counter()
    result = func(*args, **kwargs)
    end = time.perf_counter()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'<span class="hljs-subst">{func.__name__}</span> took <span class="hljs-subst">{end - start:<span class="hljs-number">.6</span>f}</span> seconds to complete'</span>)
    <span class="hljs-keyword">return</span> result
  <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@timeit</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>():
  time.sleep(<span class="hljs-number">1</span>)

process_data()

</code></pre>
<h2 id="retry">@retry</h2>
<p>This decorator forces a function to retry a number of times when it encounters an exception.</p>
<p>It takes three arguments: the number of retries, the exception to catch and retry on, and the sleep time between retries.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">retry</span>(<span class="hljs-params">num_retries, exception_to_check, sleep_time=<span class="hljs-number">0</span></span>):
    <span class="hljs-string">"""
    Decorator that retries the execution of a function if it raises a specific exception.
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorate</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, num_retries+<span class="hljs-number">1</span>):
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-keyword">return</span> func(*args, **kwargs)
                <span class="hljs-keyword">except</span> exception_to_check <span class="hljs-keyword">as</span> e:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{func.__name__}</span> raised <span class="hljs-subst">{e.__class__.__name__}</span>. Retrying..."</span>)
                    <span class="hljs-keyword">if</span> i &#x3C; num_retries:
                        time.sleep(sleep_time)
            <span class="hljs-comment"># Raise the exception if the function was not successful after the specified number of retries</span>
            <span class="hljs-keyword">raise</span> e
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorate

<span class="hljs-meta">@retry(<span class="hljs-params">num_retries=<span class="hljs-number">3</span>, exception_to_check=ValueError, sleep_time=<span class="hljs-number">1</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">random_value</span>():
    value = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
    <span class="hljs-keyword">if</span> value == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"Value cannot be 3"</span>)
    <span class="hljs-keyword">return</span> value

random_value()
<span class="hljs-comment"># random_value raised ValueError. Retrying...</span>
<span class="hljs-comment"># 1</span>

random_value()
<span class="hljs-comment"># 5</span>

</code></pre>
<h2 id="countcall">@countcall</h2>
<p>This decorator counts the number of times a function has been called.</p>
<p>This number is stored in the wrapper attribute <code>count</code>.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">countcall</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">func</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        wrapper.count += <span class="hljs-number">1</span>
        result = func(*args, **kwargs)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f'<span class="hljs-subst">{func.__name__}</span> has been called <span class="hljs-subst">{wrapper.count}</span> times'</span>)
        <span class="hljs-keyword">return</span> result
    wrapper.count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@countcall</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>():
    <span class="hljs-keyword">pass</span>

process_data()
process_data has been called <span class="hljs-number">1</span> times
process_data()
process_data has been called <span class="hljs-number">2</span> times
process_data()
process_data has been called <span class="hljs-number">3</span> times
</code></pre>
<h2 id="rate_limited">@rate_limited</h2>
<p>This is a decorator that limits the rate at which a function can be called, by sleeping an amount of time if the function is called too frequently.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">rate_limited</span>(<span class="hljs-params">max_per_second</span>):
    min_interval = <span class="hljs-number">1.0</span> / <span class="hljs-built_in">float</span>(max_per_second)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorate</span>(<span class="hljs-params">func</span>):
        last_time_called = <span class="hljs-number">0.0</span>
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">rate_limited_function</span>(<span class="hljs-params">*args, **kargs</span>):
            elapsed = time.perf_counter() - last_time_called
            left_to_wait = min_interval - elapsed
            <span class="hljs-keyword">if</span> left_to_wait > <span class="hljs-number">0</span>:
                time.sleep(left_to_wait)
            ret = func(*args, **kargs)
            last_time_called = time.perf_counter()
            <span class="hljs-keyword">return</span> ret
        <span class="hljs-keyword">return</span> rate_limited_function
    <span class="hljs-keyword">return</span> decorate

</code></pre>
<blockquote>
<p>This function hence introduces a slight time overhead between the calls but ensures that the rate limit is not exceeded.</p>
</blockquote>
<p>There's also a third-party package that implements API rate limit: it's called <strong>ratelimit</strong>.</p>
<pre><code class="hljs language-bash">pip install ratelimit
</code></pre>
<p>To use this package, simply decorate any function that makes an API call:</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">from</span> ratelimit <span class="hljs-keyword">import</span> limits

<span class="hljs-keyword">import</span> requests

FIFTEEN_MINUTES = <span class="hljs-number">900</span>

<span class="hljs-meta">@limits(<span class="hljs-params">calls=<span class="hljs-number">15</span>, period=FIFTEEN_MINUTES</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_api</span>(<span class="hljs-params">url</span>):
  response = requests.get(url)

  <span class="hljs-keyword">if</span> response.status_code != <span class="hljs-number">200</span>:
    <span class="hljs-keyword">raise</span> Execption(<span class="hljs-string">'API response: {}'</span>.<span class="hljs-built_in">format</span>(response.status_code))
  <span class="hljs-keyword">return</span> response

</code></pre>
<p>if the decorated function is called more times than allowed a <code>ratelimit.RateLimitException</code> is raised.</p>
<p>To be able to handle this exception, you can use the <code>sleep_and_retry</code> decorator in combination with the <code>ratelimit</code> decorator.</p>
<pre><code class="hljs language-python">
<span class="hljs-meta">@sleep_and_retry</span>
<span class="hljs-meta">@limits(<span class="hljs-params">calls=<span class="hljs-number">15</span>, period=FIFTEEN_MINUTES</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_api</span>(<span class="hljs-params">url</span>):
    response = requests.get(url)

    <span class="hljs-keyword">if</span> response.status_code != <span class="hljs-number">200</span>:
        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">'API response: {}'</span>.<span class="hljs-built_in">format</span>(response.status_code))
    <span class="hljs-keyword">return</span> response
</code></pre>
<p>This causes the function to sleep the remaining amount of time before being executed again.</p>
<h2 id="register">@register</h2>
<p>If your pyton script accidentally terminates and you still want to perform some tasks to save your work, perform some tasks to save your work, perform cleanup or print a message, I find that the register decorator is quite handy in this context.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">from</span> atexit <span class="hljs-keyword">import</span> register

<span class="hljs-meta">@register</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">terminate</span>():
    perform_some_cleanup()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Goodbye!"</span>)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello"</span>)

</code></pre>
<h2 id="dataclass">@dataclass</h2>
<p>The <code>@dataclass</code> decorator in Python is used to decorate classes.</p>
<p>It automatically generates special methods such as <code>__init__</code>, <code>__repr__</code>,
<code>__eq__</code>, <code>__lt__</code>, and <code>__str__</code> for classes that primarily store data. This can reduce the boilerplate code and make the classes more readable and maintainable.</p>
<p>It also provides nifty methods off-the-shelf to represent objects nicely, convert them into JSON format, make them immutable, etc.</p>
<p>The <code>@dataclass</code> decorator was introduced in Python 3.7 and is available in the standard library.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass,

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    first_name: <span class="hljs-built_in">str</span>
    last_name: <span class="hljs-built_in">str</span>
    age: <span class="hljs-built_in">int</span>
    job: <span class="hljs-built_in">str</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(other, Person):
            <span class="hljs-keyword">return</span> self.age == other.age
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NotImplemented</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(other, Person):
            <span class="hljs-keyword">return</span> self.age &#x3C; other.age
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NotImplemented</span>


john = Person(first_name=<span class="hljs-string">"John"</span>,
              last_name=<span class="hljs-string">"Doe"</span>,
              age=<span class="hljs-number">30</span>,
              job=<span class="hljs-string">"doctor"</span>,)

anne = Person(first_name=<span class="hljs-string">"Anne"</span>,
              last_name=<span class="hljs-string">"Smith"</span>,
              age=<span class="hljs-number">40</span>,
              job=<span class="hljs-string">"software engineer"</span>,)

<span class="hljs-built_in">print</span>(john == anne)
<span class="hljs-comment"># False</span>

<span class="hljs-built_in">print</span>(anne > john)
<span class="hljs-comment"># True</span>

asdict(anne)
<span class="hljs-comment">#{'first_name': 'Anne',</span>
<span class="hljs-comment"># 'last_name': 'Smith',</span>
<span class="hljs-comment"># 'age': 40,</span>
<span class="hljs-comment"># 'job': 'software engineer'}</span>

</code></pre>
<h2 id="singledispatch">@singledispatch</h2>
<p>This decorator allows a function to have different implementations for different types of arguments.</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> singledispatch

<span class="hljs-meta">@singledispatch</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fun</span>(<span class="hljs-params">arg</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Called with a single argument"</span>)

<span class="hljs-meta">@fun.register(<span class="hljs-params"><span class="hljs-built_in">int</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">_</span>(<span class="hljs-params">arg</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Called with an integer"</span>)

<span class="hljs-meta">@fun.register(<span class="hljs-params"><span class="hljs-built_in">list</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">_</span>(<span class="hljs-params">arg</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Called with a list"</span>)

fun(<span class="hljs-number">1</span>)  <span class="hljs-comment"># Prints "Called with an integer"</span>
fun([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])  <span class="hljs-comment"># Prints "Called with a list"</span>

</code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>Decorators are useful abstractions to extend your code with extra functionalities like caching, automatic retry, rate limiting, logging, or turning your classes into supercharged data containers.</p>
<p>Here's a <a href="https://github.com/lord63/awesome-python-decorator">list</a> of awesome decorators to get inspired.</p>
<p>Thanks for reading!.</p></div></article><div class="mt-20"><form><textarea class="flex w-full max-h-40 p-3 rounded resize-y bg-gray-200 text-gray-900 placeholder-gray-500" rows="2" placeholder="Please login to leave a comment" disabled=""></textarea><div class="flex items-center mt-4"><button type="button" class="py-2 px-4 rounded bg-blue-600 text-white disabled:opacity-40 hover:bg-blue-700">Log In</button></div></form><div class="space-y-6 mt-10"></div></div></div></div></main></div><div class="static inset-x-0 bottom-0 content-center py-6 "><div class="flex flex-auto px-6 text-slate-400 gap-1.5 font-semibold "><div class="grow h-16 "> </div><div class="flex flex-col gap-1.5 items-center content-between "><div class="flex flex-auto items-center gap-2 "><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="copyright" class="svg-inline--fa fa-copyright " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="font-size:20px"><path fill="currentColor" d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM199.4 312.6c-31.2-31.2-31.2-81.9 0-113.1s81.9-31.2 113.1 0c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9c-50-50-131-50-181 0s-50 131 0 181s131 50 181 0c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0c-31.2 31.2-81.9 31.2-113.1 0z"></path></svg><span>   2023  </span><span>Aaditya Chapagain</span></div><div class="ml-2 ">All Rights Reserved</div></div><div class="grow h-16 "> </div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"useful-python-decorators-to-take-your-code-to-moon-and-beyond","title":"Useful Python decorator to take your code to MARS and beyond","date":"2022-04-15 12:00","modified":"2022-04-15 12:00","category":"Blog","summary":"Do more thing with less code without compromising on quality","tags":"Machine Learning, python, coding, decorator, callbacks, developer, python skill,","authors":["Aaditya Chapagain"],"status":"published","content":"\u003cp\u003eIn this blog post, we will explore 10 helpful decorators which I regularly use in my projects to extend my mode with extra functionalites. We'll dive into each decorator, look at the code and play with some hands-on examples. If you are also Python developer, these decorators will help you massively in your python projects.\u003c/p\u003e\n\u003ch2 id=\"table-of-contents\"\u003eTable of contents\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"#logger\"\u003e@logger\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#lru_cache\"\u003e@lru_cache\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#repeat\"\u003e@repeat\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#timeit\"\u003e@timeit\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#retry\"\u003e@retry\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#countcall\"\u003e@countcall\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#rate_limited\"\u003e@rate_limited\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#register\"\u003e@register\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#dataclass\"\u003e@dataclass\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#singledispatch\"\u003e@singledispatch\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"logger\"\u003e@logger\u003c/h2\u003e\n\u003cp\u003eIf you are unfamiliar with decorators, consider reading my previous \u003ca href=\"https://aadityachapagain.com/posts/understanding-python-decorator-with-its-usage\"\u003eblog post\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003elogger is a function that takes a function as input and return a function as output.The output function is usually an extended version of the input. In our case, we want the output function to surround the call of the input function with \u003ccode\u003estart\u003c/code\u003e and \u003ccode\u003eend\u003c/code\u003e statements.\u003c/p\u003e\n\u003cp\u003eHere's the simple implementation of the \u003ccode\u003elogger\u003c/code\u003e decorator.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e wraps\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elogger\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\n\u003cspan class=\"hljs-meta\"\u003e  @wraps(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewrapper\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kwargs\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"----- \u003cspan class=\"hljs-subst\"\u003e{function.__name__}\u003c/span\u003e: start -----\"\u003c/span\u003e)\n    output = func(*args, **kwargs)\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"----- \u003cspan class=\"hljs-subst\"\u003e{function.__name__}\u003c/span\u003e: end -----\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e output\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e wrapper\n\n\n\u003cspan class=\"hljs-comment\"\u003e# now you can apply logger to any other functions\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e@logger\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esome_func\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003etext\u003c/span\u003e):\n  \u003cspan class=\"hljs-comment\"\u003e# do something here\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"lru_cache\"\u003e@lru_cache\u003c/h2\u003e\n\u003cp\u003eThis is a built-in decorator that you can import from \u003ccode\u003efunctools\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eIt caches the return values of a function , using a least-recently-used( LRU ) algorithm to discard the least-used values when the cache is full.\u003c/p\u003e\n\u003cp\u003eI typically use this decorator for long-running tasks that don't change the output with the same input like querying a database, requesting a static remote web page, or running some heavy processing.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e random\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e time\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e lru_cache\n\n\n\u003cspan class=\"hljs-meta\"\u003e@lru_cache(\u003cspan class=\"hljs-params\"\u003emaxsize=\u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eheavy_processing\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e):\n    sleep_time = n + random.random()\n    time.sleep(sleep_time)\n\n\u003cspan class=\"hljs-comment\"\u003e# first time\u003c/span\u003e\n%%time\nheavy_processing(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# CPU times: user 363 µs, sys: 727 µs, total: 1.09 ms\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Wall time: 694 ms\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# second time\u003c/span\u003e\n%%time\nheavy_processing(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# CPU times: user 4 µs, sys: 0 ns, total: 4 µs\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Wall time: 8.11 µs\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# third time\u003c/span\u003e\n%%time\nheavy_processing(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# CPU times: user 5 µs, sys: 1 µs, total: 6 µs\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Wall time: 7.15 µs\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eif you want to implement a cache decorator yourself from scratch, here's how you'd do it:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eYou add an empty dictionary as an attribute to the wrapper function to store previously computed values by the input function\u003c/li\u003e\n\u003cli\u003eWhen calling the input function, you first check if its arguments are present in the cache. If it's the case, return the result. Otherwise, compute it and put it in the cache.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e wraps\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecache\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunction\u003c/span\u003e):\n\u003cspan class=\"hljs-meta\"\u003e    @wraps(\u003cspan class=\"hljs-params\"\u003efunction\u003c/span\u003e)\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewrapper\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kwargs\u003c/span\u003e):\n        cache_key = args + \u003cspan class=\"hljs-built_in\"\u003etuple\u003c/span\u003e(kwargs.items())\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e cache_key \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e wrapper.cache:\n            output = wrapper.cache[cache_key]\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n            output = function(*args)\n            wrapper.cache[cache_key] = output\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e output\n    wrapper.cache = \u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e()\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e wrapper\n\n\u003cspan class=\"hljs-meta\"\u003e@cache\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eheavy_processing\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e):\n    sleep_time = n + random.random()\n    time.sleep(sleep_time)\n\n\n%%time\nheavy_processing(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# CPU times: user 446 µs, sys: 864 µs, total: 1.31 ms\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Wall time: 1.06 s\u003c/span\u003e\n\n%%time\nheavy_processing(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\u003cspan class=\"hljs-comment\"\u003e# CPU times: user 11 µs, sys: 0 ns, total: 11 µs\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# Wall time: 13.1 µs\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"repeat\"\u003e@repeat\u003c/h2\u003e\n\u003cp\u003eThis decorator causes a function to be called multiple times in a row.\u003c/p\u003e\n\u003cp\u003eThis can be useful for debugging purposes, stress tests, or automating the repetition of multiple tasks.\u003c/p\u003e\n\u003cp\u003eUnlike the previous decorators, this one expects an input parameter.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erepeat\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003enumber_of_times\u003c/span\u003e):\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edecorate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\n\u003cspan class=\"hljs-meta\"\u003e        @wraps(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e)\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewrapper\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kwargs\u003c/span\u003e):\n            \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e _ \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(number_of_times):\n                func(*args, **kwargs)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e wrapper\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decorate\n\n\n\u003cspan class=\"hljs-meta\"\u003e@repeat(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edummy\u003c/span\u003e():\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"hello\"\u003c/span\u003e)\n\ndummy()\n\u003cspan class=\"hljs-comment\"\u003e# hello\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# hello\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# hello\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# hello\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# hello\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"timeit\"\u003e@timeit\u003c/h2\u003e\n\u003cp\u003eThis decorator measures the execution time of a function and prints the result: this serves as debugging or monitoring.\u003c/p\u003e\n\u003cp\u003eIn the following snippet, the \u003ccode\u003etimeit\u003c/code\u003e decorator measures the time it takes for the \u003ccode\u003eprocess_data\u003c/code\u003e function to execute and prints out the elapsed time in seconds.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e time\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e wraps\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etimeit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\n\u003cspan class=\"hljs-meta\"\u003e  @wraps(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewrapper\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kwargs\u003c/span\u003e):\n    start = time.perf_counter()\n    result = func(*args, **kwargs)\n    end = time.perf_counter()\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef'\u003cspan class=\"hljs-subst\"\u003e{func.__name__}\u003c/span\u003e took \u003cspan class=\"hljs-subst\"\u003e{end - start:\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003ef}\u003c/span\u003e seconds to complete'\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e wrapper\n\n\u003cspan class=\"hljs-meta\"\u003e@timeit\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprocess_data\u003c/span\u003e():\n  time.sleep(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\nprocess_data()\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"retry\"\u003e@retry\u003c/h2\u003e\n\u003cp\u003eThis decorator forces a function to retry a number of times when it encounters an exception.\u003c/p\u003e\n\u003cp\u003eIt takes three arguments: the number of retries, the exception to catch and retry on, and the sleep time between retries.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e random\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e time\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e wraps\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eretry\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003enum_retries, exception_to_check, sleep_time=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\u003c/span\u003e):\n    \u003cspan class=\"hljs-string\"\u003e\"\"\"\n    Decorator that retries the execution of a function if it raises a specific exception.\n    \"\"\"\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edecorate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\n\u003cspan class=\"hljs-meta\"\u003e        @wraps(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e)\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewrapper\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kwargs\u003c/span\u003e):\n            \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, num_retries+\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e):\n                \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e:\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e func(*args, **kwargs)\n                \u003cspan class=\"hljs-keyword\"\u003eexcept\u003c/span\u003e exception_to_check \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e e:\n                    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"\u003cspan class=\"hljs-subst\"\u003e{func.__name__}\u003c/span\u003e raised \u003cspan class=\"hljs-subst\"\u003e{e.__class__.__name__}\u003c/span\u003e. Retrying...\"\u003c/span\u003e)\n                    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e i \u0026#x3C; num_retries:\n                        time.sleep(sleep_time)\n            \u003cspan class=\"hljs-comment\"\u003e# Raise the exception if the function was not successful after the specified number of retries\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e wrapper\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decorate\n\n\u003cspan class=\"hljs-meta\"\u003e@retry(\u003cspan class=\"hljs-params\"\u003enum_retries=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, exception_to_check=ValueError, sleep_time=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erandom_value\u003c/span\u003e():\n    value = random.randint(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e value == \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e ValueError(\u003cspan class=\"hljs-string\"\u003e\"Value cannot be 3\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e value\n\nrandom_value()\n\u003cspan class=\"hljs-comment\"\u003e# random_value raised ValueError. Retrying...\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 1\u003c/span\u003e\n\nrandom_value()\n\u003cspan class=\"hljs-comment\"\u003e# 5\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"countcall\"\u003e@countcall\u003c/h2\u003e\n\u003cp\u003eThis decorator counts the number of times a function has been called.\u003c/p\u003e\n\u003cp\u003eThis number is stored in the wrapper attribute \u003ccode\u003ecount\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e wraps\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecountcall\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\n\u003cspan class=\"hljs-meta\"\u003e    @wraps(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e)\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewrapper\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kwargs\u003c/span\u003e):\n        wrapper.count += \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n        result = func(*args, **kwargs)\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef'\u003cspan class=\"hljs-subst\"\u003e{func.__name__}\u003c/span\u003e has been called \u003cspan class=\"hljs-subst\"\u003e{wrapper.count}\u003c/span\u003e times'\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n    wrapper.count = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e wrapper\n\n\u003cspan class=\"hljs-meta\"\u003e@countcall\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprocess_data\u003c/span\u003e():\n    \u003cspan class=\"hljs-keyword\"\u003epass\u003c/span\u003e\n\nprocess_data()\nprocess_data has been called \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e times\nprocess_data()\nprocess_data has been called \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e times\nprocess_data()\nprocess_data has been called \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e times\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"rate_limited\"\u003e@rate_limited\u003c/h2\u003e\n\u003cp\u003eThis is a decorator that limits the rate at which a function can be called, by sleeping an amount of time if the function is called too frequently.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e time\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e wraps\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erate_limited\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emax_per_second\u003c/span\u003e):\n    min_interval = \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e / \u003cspan class=\"hljs-built_in\"\u003efloat\u003c/span\u003e(max_per_second)\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edecorate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e):\n        last_time_called = \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e        @wraps(\u003cspan class=\"hljs-params\"\u003efunc\u003c/span\u003e)\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erate_limited_function\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e*args, **kargs\u003c/span\u003e):\n            elapsed = time.perf_counter() - last_time_called\n            left_to_wait = min_interval - elapsed\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e left_to_wait \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e:\n                time.sleep(left_to_wait)\n            ret = func(*args, **kargs)\n            last_time_called = time.perf_counter()\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e ret\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e rate_limited_function\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e decorate\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis function hence introduces a slight time overhead between the calls but ensures that the rate limit is not exceeded.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThere's also a third-party package that implements API rate limit: it's called \u003cstrong\u003eratelimit\u003c/strong\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003epip install ratelimit\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo use this package, simply decorate any function that makes an API call:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e ratelimit \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e limits\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e requests\n\nFIFTEEN_MINUTES = \u003cspan class=\"hljs-number\"\u003e900\u003c/span\u003e\n\n\u003cspan class=\"hljs-meta\"\u003e@limits(\u003cspan class=\"hljs-params\"\u003ecalls=\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, period=FIFTEEN_MINUTES\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecall_api\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eurl\u003c/span\u003e):\n  response = requests.get(url)\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e response.status_code != \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e Execption(\u003cspan class=\"hljs-string\"\u003e'API response: {}'\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(response.status_code))\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eif the decorated function is called more times than allowed a \u003ccode\u003eratelimit.RateLimitException\u003c/code\u003e is raised.\u003c/p\u003e\n\u003cp\u003eTo be able to handle this exception, you can use the \u003ccode\u003esleep_and_retry\u003c/code\u003e decorator in combination with the \u003ccode\u003eratelimit\u003c/code\u003e decorator.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-meta\"\u003e@sleep_and_retry\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e@limits(\u003cspan class=\"hljs-params\"\u003ecalls=\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, period=FIFTEEN_MINUTES\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecall_api\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eurl\u003c/span\u003e):\n    response = requests.get(url)\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e response.status_code != \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e Exception(\u003cspan class=\"hljs-string\"\u003e'API response: {}'\u003c/span\u003e.\u003cspan class=\"hljs-built_in\"\u003eformat\u003c/span\u003e(response.status_code))\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis causes the function to sleep the remaining amount of time before being executed again.\u003c/p\u003e\n\u003ch2 id=\"register\"\u003e@register\u003c/h2\u003e\n\u003cp\u003eIf your pyton script accidentally terminates and you still want to perform some tasks to save your work, perform some tasks to save your work, perform cleanup or print a message, I find that the register decorator is quite handy in this context.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e atexit \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e register\n\n\u003cspan class=\"hljs-meta\"\u003e@register\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eterminate\u003c/span\u003e():\n    perform_some_cleanup()\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Goodbye!\"\u003c/span\u003e)\n\n\u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e:\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Hello\"\u003c/span\u003e)\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"dataclass\"\u003e@dataclass\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode\u003e@dataclass\u003c/code\u003e decorator in Python is used to decorate classes.\u003c/p\u003e\n\u003cp\u003eIt automatically generates special methods such as \u003ccode\u003e__init__\u003c/code\u003e, \u003ccode\u003e__repr__\u003c/code\u003e,\n\u003ccode\u003e__eq__\u003c/code\u003e, \u003ccode\u003e__lt__\u003c/code\u003e, and \u003ccode\u003e__str__\u003c/code\u003e for classes that primarily store data. This can reduce the boilerplate code and make the classes more readable and maintainable.\u003c/p\u003e\n\u003cp\u003eIt also provides nifty methods off-the-shelf to represent objects nicely, convert them into JSON format, make them immutable, etc.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003e@dataclass\u003c/code\u003e decorator was introduced in Python 3.7 and is available in the standard library.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e dataclasses \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e dataclass,\n\n\u003cspan class=\"hljs-meta\"\u003e@dataclass\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePerson\u003c/span\u003e:\n    first_name: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\n    last_name: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\n    age: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e\n    job: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__eq__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, other\u003c/span\u003e):\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(other, Person):\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.age == other.age\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003eNotImplemented\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__lt__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, other\u003c/span\u003e):\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eisinstance\u003c/span\u003e(other, Person):\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.age \u0026#x3C; other.age\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003eNotImplemented\u003c/span\u003e\n\n\njohn = Person(first_name=\u003cspan class=\"hljs-string\"\u003e\"John\"\u003c/span\u003e,\n              last_name=\u003cspan class=\"hljs-string\"\u003e\"Doe\"\u003c/span\u003e,\n              age=\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e,\n              job=\u003cspan class=\"hljs-string\"\u003e\"doctor\"\u003c/span\u003e,)\n\nanne = Person(first_name=\u003cspan class=\"hljs-string\"\u003e\"Anne\"\u003c/span\u003e,\n              last_name=\u003cspan class=\"hljs-string\"\u003e\"Smith\"\u003c/span\u003e,\n              age=\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e,\n              job=\u003cspan class=\"hljs-string\"\u003e\"software engineer\"\u003c/span\u003e,)\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(john == anne)\n\u003cspan class=\"hljs-comment\"\u003e# False\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(anne \u003e john)\n\u003cspan class=\"hljs-comment\"\u003e# True\u003c/span\u003e\n\nasdict(anne)\n\u003cspan class=\"hljs-comment\"\u003e#{'first_name': 'Anne',\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 'last_name': 'Smith',\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 'age': 40,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 'job': 'software engineer'}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"singledispatch\"\u003e@singledispatch\u003c/h2\u003e\n\u003cp\u003eThis decorator allows a function to have different implementations for different types of arguments.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e functools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e singledispatch\n\n\u003cspan class=\"hljs-meta\"\u003e@singledispatch\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efun\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003earg\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Called with a single argument\"\u003c/span\u003e)\n\n\u003cspan class=\"hljs-meta\"\u003e@fun.register(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e_\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003earg\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Called with an integer\"\u003c/span\u003e)\n\n\u003cspan class=\"hljs-meta\"\u003e@fun.register(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e_\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003earg\u003c/span\u003e):\n    \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Called with a list\"\u003c/span\u003e)\n\nfun(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)  \u003cspan class=\"hljs-comment\"\u003e# Prints \"Called with an integer\"\u003c/span\u003e\nfun([\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e])  \u003cspan class=\"hljs-comment\"\u003e# Prints \"Called with a list\"\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eDecorators are useful abstractions to extend your code with extra functionalities like caching, automatic retry, rate limiting, logging, or turning your classes into supercharged data containers.\u003c/p\u003e\n\u003cp\u003eHere's a \u003ca href=\"https://github.com/lord63/awesome-python-decorator\"\u003elist\u003c/a\u003e of awesome decorators to get inspired.\u003c/p\u003e\n\u003cp\u003eThanks for reading!.\u003c/p\u003e"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"useful-python-decorators-to-take-your-code-to-moon-and-beyond"},"buildId":"PUYH9SLgvJIBw6lAfxbRe","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>